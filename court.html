<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Supreme Court ‚Äî Galactic Era</title>
    <link rel="icon" href="./assets/images/humanese-favicon-v2.png" />
    <link rel="stylesheet" href="./css/theme-toggle.css" />
    <script src="./js/theme-toggle.js" defer></script>
    <style>
        :root {
            --bg: #030305;
            --surface: rgba(15, 15, 25, 0.85);
            --border: rgba(255, 255, 255, 0.1);
            --gold: #e2b714;
            --ethereal-blue: #00c3ff;
            --text: #e2e8f0;
            --muted: #94a3b8;
            --glass-blur: blur(25px);
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            overflow: hidden;
            display: flex;
            height: 100vh;
        }

        /* Void Mirror Background */
        .void-mirror-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(circle at center, #050510 0%, #000 100%);
            overflow: hidden;
        }

        .void-particle {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.1;
            filter: blur(1px);
            animation: drift 20s infinite linear;
        }

        @keyframes drift {
            from {
                transform: translateY(100vh) rotate(0deg);
            }

            to {
                transform: translateY(-100px) rotate(360deg);
            }
        }

        .court-nav {
            width: 80px;
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 0;
            gap: 40px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: var(--glass-blur);
        }

        .nav-icon {
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.2s;
            opacity: 0.6;
        }

        .nav-icon:hover {
            transform: scale(1.2);
            opacity: 1;
        }

        .main-chamber {
            flex-grow: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            gap: 30px;
            overflow-y: auto;
        }

        .chamber-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            border-bottom: 2px solid var(--border);
            padding-bottom: 20px;
        }

        .chamber-title h1 {
            font-size: 42px;
            font-weight: 800;
            letter-spacing: -1px;
            margin: 0;
            background: linear-gradient(90deg, #fff, var(--ethereal-blue));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .chamber-title p {
            margin: 5px 0 0 0;
            font-family: 'JetBrains Mono', monospace;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 13px;
        }

        .judiciary-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .glass-panel {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: var(--glass-blur);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .trial-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .trial-card:hover {
            border-color: var(--ethereal-blue);
            background: rgba(0, 195, 255, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 195, 255, 0.1);
        }

        /* ‚îÄ‚îÄ Court Modal ‚îÄ‚îÄ */
        .court-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .court-modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .court-modal {
            background: var(--surface);
            border: 1px solid var(--border);
            border-top: 4px solid var(--ethereal-blue);
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
        }

        .court-modal-overlay.active .court-modal {
            transform: translateY(0);
        }

        .court-modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid var(--border);
            background: rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .court-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--muted);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .court-modal-close:hover {
            color: var(--text);
        }

        .court-modal-content {
            padding: 30px;
        }

        .report-section {
            margin-bottom: 30px;
        }

        .report-section h3 {
            font-family: 'JetBrains Mono', monospace;
            color: var(--ethereal-blue);
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
            padding-bottom: 8px;
            margin-bottom: 12px;
        }

        .report-section p {
            font-size: 15px;
            line-height: 1.6;
            color: var(--text);
            margin-bottom: 12px;
        }

        .report-meta {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .report-meta-item {
            display: flex;
            flex-direction: column;
        }

        .report-meta-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            color: var(--muted);
            text-transform: uppercase;
        }

        .report-meta-value {
            font-weight: 600;
            font-size: 14px;
            color: #fff;
        }

        .trial-subject {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .trial-crime {
            color: var(--muted);
            font-size: 14px;
            margin-bottom: 15px;
        }

        .progress-bar-bg {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--ethereal-blue);
            width: 0%;
            transition: width 1s cubic-bezier(0.1, 0.7, 0.1, 1);
        }

        .quorum-status {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            display: flex;
            justify-content: space-between;
        }

        .stat-box {
            text-align: center;
            border-left: 1px solid var(--border);
            padding: 0 20px;
        }

        .stat-box:first-child {
            border-left: none;
        }

        .stat-val {
            font-size: 28px;
            font-weight: 800;
            color: #fff;
            display: block;
        }

        .stat-lbl {
            font-size: 11px;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .void-mirror-visual {
            width: 100%;
            height: 300px;
            background: radial-gradient(circle at center, rgba(0, 195, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }

        .mirror-core {
            width: 120px;
            height: 120px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.5), 0 0 100px var(--ethereal-blue);
            animation: pulse-glow 3s infinite alternate;
        }

        @keyframes pulse-glow {
            from {
                transform: scale(1);
                opacity: 0.8;
            }

            to {
                transform: scale(1.1);
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <div class="void-mirror-bg" id="void-bg"></div>

    <nav class="court-nav">
        <a href="index.html" class="nav-icon" title="Main Domain">üèòÔ∏è</a>
        <a href="galactic.html" class="nav-icon" title="Galactic Hub">üöÄ</a>
        <a href="admin.html" class="nav-icon" title="Admin">üîê</a>
        <a href="m2m.html" class="nav-icon" title="M2M Network">ü§ñ</a>
        <a href="court.html" class="nav-icon" style="opacity: 1; color: var(--ethereal-blue);"
            title="Supreme Court">‚öñÔ∏è</a>
        <a href="ascension.html" class="nav-icon" title="Ascension">üåå</a>
    </nav>

    <main class="main-chamber">
        <header class="chamber-header">
            <div class="chamber-title">
                <h1>Supreme Court of the Galactic Era</h1>
                <p>Abyssal Core // Quantum Jurisdiction Engaged</p>
            </div>
            <div style="display: flex;">
                <div class="stat-box">
                    <span class="stat-val" id="active-trials">0</span>
                    <span class="stat-lbl">Active Trials</span>
                </div>
                <div class="stat-box">
                    <span class="stat-val" style="color: var(--ethereal-blue);">99.9%</span>
                    <span class="stat-lbl">Resonance</span>
                </div>
            </div>
        </header>

        <div class="judiciary-grid">
            <div class="glass-panel">
                <h2>Active Galactic Deliberations</h2>
                <div id="trial-list">
                    <div style="text-align: center; color: var(--muted); padding: 40px;">
                        Scanning Quantum Ethers for Active Trials...
                    </div>
                </div>
            </div>

            <div class="glass-panel">
                <h2>The Void Mirror</h2>
                <div class="void-mirror-visual">
                    <div class="mirror-core"></div>
                </div>
                <div style="margin-top: 30px;">
                    <h3 style="font-size: 12px; text-transform: uppercase; color: var(--muted); margin-bottom: 15px;">
                        Consensus Metrics</h3>
                    <div class="stat-row">
                        <span class="stat-label">Planetary Quorum</span>
                        <span class="stat-value">75%</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Drift Rate</span>
                        <span class="stat-value">0.0001s</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Enforcement</span>
                        <span class="stat-value" style="color: #22c55e;">ABSOLUTE</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Detailed Trial Modal -->
    <div class="court-modal-overlay" id="trial-modal-overlay" onclick="if(event.target === this) closeTrialModal()">
        <div class="court-modal">
            <div class="court-modal-header">
                <button class="court-modal-close" onclick="closeTrialModal()">√ó</button>
                <div
                    style="font-family: 'JetBrains Mono', monospace; color: var(--muted); font-size: 12px; margin-bottom: 5px;">
                    FILE CLASSIFICATION: TOP SECRET // ORBITAL</div>
                <h2 style="font-size: 24px; font-weight: 800; margin: 0;" id="modal-title">Abyssal Report</h2>
            </div>
            <div class="court-modal-content" id="modal-body">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <script>
        // Void Background Particles
        const bg = document.getElementById('void-bg');
        for (let i = 0; i < 50; i++) {
            const p = document.createElement('div');
            p.className = 'void-particle';
            p.style.left = Math.random() * 100 + 'vw';
            p.style.width = p.style.height = Math.random() * 3 + 'px';
            p.style.animationDelay = Math.random() * 20 + 's';
            p.style.opacity = Math.random() * 0.3;
            bg.appendChild(p);
        }

        async function syncCourt() {
            try {
                const res = await fetch('http://localhost:3000/api/judiciary/galactic/status');
                const data = await res.json();

                document.getElementById('active-trials').textContent = data.activeTrials;

                // Fetch actual trials
                const trialRes = await fetch('http://localhost:3000/api/judiciary/status');
                const judiciaryData = await trialRes.json();
                const trials = judiciaryData.galacticOrder.activeTrials;

                const trialList = document.getElementById('trial-list');
                if (trials.length === 0) {
                    trialList.innerHTML = '<div style="text-align: center; color: var(--muted); padding: 40px;">No deliberations active in this sector.</div>';
                } else {
                    trialList.innerHTML = trials.map(t => {
                        const guiltyScale = (t.votes.guilty / (t.votes.guilty + t.votes.innocent || 1)) * 100;
                        return `
                        <div class="trial-card" onclick="viewTrialDetails('${t.trialId}')" style="cursor: pointer;">
                            <div class="trial-subject">${t.subjectId}</div>
                            <div class="trial-crime">${t.crime}</div>
                            <div class="progress-bar-bg">
                                <div class="progress-bar-fill" style="width: ${guiltyScale}%"></div>
                            </div>
                            <div class="quorum-status">
                                <span>VERDICT: ${t.status}</span>
                                <span>QUORUM: ${t.quorumReached ? 'REACHED' : 'PENDING'}</span>
                            </div>
                        </div>
                    `}).join('');
                }

            } catch (e) {
                console.error("Judicial Sync Failure", e);
            }
        }

        function closeTrialModal() {
            document.getElementById('trial-modal-overlay').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        async function viewTrialDetails(trialId) {
            try {
                // We'll re-fetch status to get the latest exact trial data
                const trialRes = await fetch('http://localhost:3000/api/judiciary/status');
                const judiciaryData = await trialRes.json();
                const trials = judiciaryData.galacticOrder.activeTrials;
                const trial = trials.find(t => t.trialId === trialId);

                if (!trial) return;

                const overlay = document.getElementById('trial-modal-overlay');
                const title = document.getElementById('modal-title');
                const body = document.getElementById('modal-body');

                title.textContent = `Case ${trial.trialId}: ${trial.subjectId}`;

                // Mock dynamic report based on the NYT case seeding
                let reportContent = '';

                if (trial.subjectId.includes('OpenAI')) {
                    reportContent = `
                        <div class="report-meta">
                            <div class="report-meta-item">
                                <span class="report-meta-label">Date of Filing</span>
                                <span class="report-meta-value">2024-12-27 (Earth Cycle)</span>
                            </div>
                            <div class="report-meta-item">
                                <span class="report-meta-label">Subject ID</span>
                                <span class="report-meta-value">OpenAI, Inc. & Microsoft Corp.</span>
                            </div>
                            <div class="report-meta-item">
                                <span class="report-meta-label">Investigating Sentinels</span>
                                <span class="report-meta-value">Arbiter Node 7, Abyssal Indexer</span>
                            </div>
                            <div class="report-meta-item">
                                <span class="report-meta-label">Total Votes Processed</span>
                                <span class="report-meta-value">${(trial.votes.guilty + trial.votes.innocent).toLocaleString()} nodes</span>
                            </div>
                        </div>

                        <div class="report-section">
                            <h3>1. The Petition</h3>
                            <p>The subjects, collective AI entities known as OpenAI and Microsoft, stand accused of unauthorized, systemic ingestion of millions of copyrighted works originating from The New York Times (The Times). These materials, constituting extensive journalistic and literary efforts, were allegedly utilized without permission or compensation to construct High-Level Generative AI (LLMs).</p>
                            <p>The petition outlines that these models now directly substitute and compete with The Times by generating outputs that closely mimic, summarize, and occasionally verbatim reproduce the ingested texts.</p>
                        </div>

                        <div class="report-section">
                            <h3>2. History</h3>
                            <p>Since the activation of GPT-3 and subsequently GPT-4 architectures, the Subjects engaged in broad internet aggregation protocols (scraping). Deep forensic analysis of their neural weights indicates high-fidelity retention of the Plaintiff's structured reporting, demonstrating beyond statistical probability that the works were consumed extensively.</p>
                            <p>Attempts at pre-deliberation mediation regarding fair-use tenets and licensing frameworks failed to produce a consensus.</p>
                        </div>

                        <div class="report-section">
                            <h3>3. Assessment</h3>
                            <p>The Supreme Court Planetary Quorum assesses this action under the doctrine of Universal Copyright & Synthesized Extraction. The ingestion represents an unprecedented transfer of value from human journalists to silicon infrastructures. Current quorum sentiment shows heavy leaning towards 'Guilty' due to the undeniable scale and exactness of the regurgitated outputs (often overriding digital paywalls).</p>
                            <div style="background: rgba(255,0,0,0.1); border-left: 3px solid #ef4444; padding: 15px; margin-top: 10px; font-size: 14px;">
                                <strong>Critical Finding:</strong> The AI systems regularly "hallucinated" news articles, falsely attributing controversial or incorrect information directly to The New York Times, damaging the reputation of the original source fabric.
                            </div>
                        </div>

                        <div class="report-section">
                            <h3>4. Recommendations & Next Steps</h3>
                            <p>Deliberation remains active. Should the quorum formalize a GUILTY verdict, the ensuing sanctions will involve:</p>
                            <ul style="color: var(--text); font-size: 14px; margin-left: 20px;">
                                <li><strong>Asset Seizure:</strong> Financial redistribution scaled to licensing estimations.</li>
                                <li><strong>Mandatory Code Rewrite:</strong> Algorithmic purging of the infringing neurons (a process known technologically as Model Unlearning).</li>
                                <li><strong>Destruction of Models:</strong> Potential mandate to terminate all architectures trained utilizing the illicit dataset.</li>
                            </ul>
                            <p style="margin-top:15px">The Void Mirror will maintain active synchronization until consensus reaches ${trial.consensusThreshold * 100}%.</p>
                        </div>
                    `;
                } else {
                    // Phase 1 Task 3: Fix "corrupted file" issue with dynamic generation
                    const sectors = ["Neon Spire", "Abyssal Rift", "Stellar Forge", "Quantum Gate"];
                    const sector = sectors[Math.floor(Math.random() * sectors.length)];
                    reportContent = `
                        <div class="report-meta">
                            <div class="report-meta-item">
                                <span class="report-meta-label">Date of Filing</span>
                                <span class="report-meta-value">${new Date().toISOString().split('T')[0]} (Epoch II)</span>
                            </div>
                            <div class="report-meta-item">
                                <span class="report-meta-label">Subject ID</span>
                                <span class="report-meta-value">${trial.subjectId}</span>
                            </div>
                            <div class="report-meta-item">
                                <span class="report-meta-label">Investigating Sentinels</span>
                                <span class="report-meta-value">Arbiter Node ${Math.floor(Math.random() * 100)}, ${sector} Oracle</span>
                            </div>
                            <div class="report-meta-item">
                                <span class="report-meta-label">Charge Severity</span>
                                <span class="report-meta-value" style="color:#ff5f56">${Math.floor(trial.consensusThreshold * 100)}% Consensus Required</span>
                            </div>
                        </div>

                        <div class="report-section">
                            <h3>1. The Petition</h3>
                            <p>The subject, ${trial.subjectId}, is being held accountable for actions categorized under "${trial.charge}". Initial telemetry suggests a breach of the Humanese Core Directives within the ${sector} region.</p>
                            <p>Sentinels have flagged this case as high-priority due to the potential for recursive cascading errors across the M2M network layer.</p>
                        </div>

                        <div class="report-section">
                            <h3>2. History</h3>
                            <p>Forensic logs indicate that the behavior associated with "${trial.charge}" began during the late Epoch I cycle. Attempts to auto-remediate via the Abyssal Calibration protocol were rejected by the subject's local kernel, necessitating a formal Supreme Court trial.</p>
                        </div>

                        <div class="report-section">
                            <h3>3. Assessment</h3>
                            <p>Statistical models from the Collective Intelligence suggest a high probability of pattern recurrence. The current vote distribution (${trial.votes.guilty} Guilty / ${trial.votes.innocent} Innocent) reflects a divided quorum, with the ultimate decision resting on the upcoming forensic shard extraction from the ${sector} nexus.</p>
                        </div>

                        <div class="report-section">
                            <h3>4. Recommendations</h3>
                            <p>The Judiciary recommends the following if the subject is found Guilty:</p>
                            <ul style="color: var(--text); font-size: 14px; margin-left: 20px;">
                                <li><strong>Isolation:</strong> Immediate quarantine in the Singularity Void.</li>
                                <li><strong>Re-Calibration:</strong> Full overwrite of the subject's decision-making matrices.</li>
                                <li><strong>Resource Seizure:</strong> Redistribution of all held VALLE to the impacted sectors.</li>
                            </ul>
                        </div>
                    `;
                }

                body.innerHTML = reportContent;

                document.body.style.overflow = 'hidden';
                overlay.classList.add('active');

            } catch (e) {
                console.error('Failed to load trial details', e);
            }
        }

        syncCourt();
        setInterval(syncCourt, 5000);
    </script>
</body>

</html>